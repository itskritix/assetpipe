name = "assetpipe-api"
main = "src/index.ts"
compatibility_date = "2024-12-18"
compatibility_flags = ["nodejs_compat"]

# R2 bucket binding
[[r2_buckets]]
binding = "LOGOS_BUCKET"
bucket_name = "assetpipe-logos"

# KV namespace for rate limiting
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "your-kv-namespace-id"
preview_id = "your-preview-kv-namespace-id"

# Environment variables (set via wrangler secret)
# SUPABASE_URL
# SUPABASE_SERVICE_KEY

[vars]
ENVIRONMENT = "development"

# Production environment
[env.production]
vars = { ENVIRONMENT = "production" }

# Rate limiting (requires paid plan)
# [[unsafe.bindings]]
# name = "RATE_LIMITER"
# type = "ratelimit"
# namespace_id = "..."
